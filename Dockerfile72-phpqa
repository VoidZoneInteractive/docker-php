FROM php:7.2-stretch

ADD ./scripts /scripts 
ADD ./bin/slack /usr/local/bin
RUN /scripts/php_install.sh
RUN /scripts/node_install.sh
RUN apt-get install jq -yqq
RUN apt-get clean
ADD ./phpqa /phpqa
WORKDIR /phpqa
RUN composer install
RUN ln -sr ./script/phpunit-coverage vendor/bin/phpunit-coverage
RUN ln -sr ./script/phpunit-result vendor/bin/phpunit-result
CMD /phpqa/vendor/bin/phpqa
