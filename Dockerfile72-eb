FROM php:7.2-stretch

ADD ./scripts /scripts 
ADD ./bin/slack /usr/local/bin
RUN /scripts/php_install.sh
RUN /scripts/node_install.sh
RUN apt-get install jq build-essential python-dev libreadline-dev libbz2-dev libssl-dev libsqlite3-dev libffi-dev -yqq
RUN curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash
RUN echo "export PATH=\"/root/.pyenv/bin:\$PATH\"" >> ~/.bashrc
RUN . ~/.bashrc && pyenv install 3.7.2
RUN git clone https://github.com/aws/aws-elastic-beanstalk-cli-setup.git
RUN ./aws-elastic-beanstalk-cli-setup/scripts/bundled_installer

ENV PATH="/root/.ebcli-virtual-env/executables:$PATH"
ENV PATH="/root/.pyenv/versions/3.7.2/bin:$PATH"

RUN apt-get clean
